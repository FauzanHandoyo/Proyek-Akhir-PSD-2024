library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity StateMachine is
    Port (
        clk           : in STD_LOGIC;
        reset         : in STD_LOGIC;
        heart_rate    : in STD_LOGIC;
        active_state  : out STD_LOGIC;
        stop_state    : out STD_LOGIC
    );
end StateMachine;

architecture Behavioral of StateMachine is
    signal state : STD_LOGIC := '0'; -- '0' for Idle, '1' for Active
begin
    process(clk)
    begin
        if rising_edge(clk) then
            if reset = '1' then
                state <= '0';  -- Reset to Idle state
            elsif heart_rate = '1' then
                state <= '1';  -- Active state when heart_rate is high
            else
                state <= '0';  -- Idle state when heart_rate is low
            end if;
        end if;
    end process;

    active_state <= state;
    stop_state   <= not state;
end Behavioral;
